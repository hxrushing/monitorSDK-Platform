# 组件文档（前端）

> 说明：本页覆盖当前项目的主要通用组件，提供功能简介、Props 说明和使用示例，便于查阅与复用。

目录
- Layout
  - MainLayout
  - Sidebar（嵌入在 MainLayout 中）
- 媒体与优化
  - OptimizedImage
  - PreloadResources
- 加载与占位
  - RouteLoading / PageLoading / ChartLoading
  - Skeleton 系列（DashboardSkeleton、ChartSkeleton 等）
- 统计展示
  - StatisticCard

---
## Layout

### MainLayout
- 功能：应用主框架，包含顶部 Header、左侧导航、项目选择、主题切换、内容区域和帮助抽屉。
- 关键特性：
  - 侧边栏可折叠，支持快捷键 Ctrl/Cmd + B。
  - 主题切换（暗/亮），项目选择器，创建项目弹窗。
  - 帮助抽屉（快捷键说明、功能说明）。
- 主要 Props：
  - `children: React.ReactNode` 渲染主体内容。
- 用法：
  ```tsx
  import MainLayout from '@/components/Layout/MainLayout';
  import { Outlet } from 'react-router-dom';

  const App = () => (
    <MainLayout>
      <Outlet />
    </MainLayout>
  );
  ```

### Sidebar（MainLayout 内部）
- 功能：分组导航（分析/预测/管理/示例/系统），支持权限控制（Admin 才能访问部分菜单）。
- 要点：
  - 使用 Ant Design Menu。
  - 在 MainLayout 中已处理展开/折叠、选中态、权限提示（Tooltip）。

---
## 媒体与优化

### OptimizedImage
- 功能：图片懒加载、占位图、响应式加载。
- Props：
  - `src` / `alt` / `width` / `height`
  - `loading`: 'lazy' | 'eager'（默认 lazy）
  - `fallback`: 加载失败时回退地址
  - `fetchPriority`: 'high' | 'low' | 'auto'
  - `isLCP`: 是否为首屏关键图（提升优先级、同步解码）
  - `sizes`: 响应式 sizes
  - `srcSet`: 响应式 srcset
  - `placeholder`: 占位图（低清晰度或透明图）
- 特性：
  - IntersectionObserver 懒加载（rootMargin 200px）。
  - 首屏关键图：设 `isLCP` 或 `loading="eager"` 时不懒加载且 fetchpriority=high。
  - 失败回退：先回到原始 src，再用 fallback。
- 用法：
  ```tsx
  <OptimizedImage
    src="/assets/banner@2x.jpg"
    placeholder="/assets/banner-blur.jpg"
    alt="banner"
    width={1200}
    height={400}
    srcSet="/assets/banner@1x.jpg 1x, /assets/banner@2x.jpg 2x"
    sizes="(max-width: 768px) 100vw, 1200px"
  />
  ```

### PreloadResources
- 功能：在应用启动时预加载核心资源（字体、关键图片等），减少首屏抖动。
- 用法：在 MainLayout 顶部已引入，无需额外配置。

---
## 加载与占位

### RouteLoading / PageLoading / ChartLoading
- 功能：统一的加载态组件。
  - RouteLoading：路由懒加载时的占位。
  - PageLoading：页面级加载遮罩。
  - ChartLoading：图表加载占位。
- 用法示例：
  ```tsx
  import { RouteLoading } from '@/components/Loading';
  // 在路由 Suspense fallback 中使用
  <Suspense fallback={<RouteLoading />}><Page /></Suspense>
  ```

### Skeleton 系列
- 组件：
  - `DashboardSkeleton`：完整看板骨架屏。
  - `ChartSkeleton`：图表容器占位。
  - `TableSkeleton`：表格占位。
  - `StatisticCardSkeleton`：统计卡片占位。
- 用法示例：
  ```tsx
  if (loading && !dataLoaded) return <DashboardSkeleton />;
  ```

---
## 统计展示

### StatisticCard
- 功能：小型统计卡片封装，支持图标、数值、后缀。
- Props：
  - `title: string`
  - `value: number`
  - `suffix?: string`
  - `icon?: React.ReactNode`
- 用法：
  ```tsx
  <StatisticCard title="今日PV" value={1234} suffix="次" icon={<EyeOutlined />} />
  ```

---
## 常见问题
- **如何新增组件文档？**
  - 在本文件追加章节，包含：功能简介、Props 表、用法示例。
- **如何在 Storybook 中使用？**
  - 若需可视化文档，可按需添加 Storybook 配置（未在本仓库默认启用）。



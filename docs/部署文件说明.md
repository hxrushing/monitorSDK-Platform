# 📁 部署相关文件说明

本文档说明项目中的所有部署相关文件及其用途。

## 📚 文档文件

### 1. `docs/项目部署指南.md`
**完整部署文档** - 详细的部署步骤和配置说明
- ✅ 包含所有部署方式
- ✅ 详细的配置说明
- ✅ 常见问题解答
- ✅ 适用于生产环境

**适用场景**: 首次部署、深入了解部署流程

---

### 2. `docs/快速部署指南.md`
**快速部署文档** - 最简化的部署方式
- ✅ 5分钟快速上手
- ✅ Docker Compose 一键部署
- ✅ 常用命令速查

**适用场景**: 快速测试、开发环境部署

---

### 3. `docs/部署检查清单.md`
**部署检查清单** - 确保部署完整无误
- ✅ 逐步检查清单
- ✅ 验证部署正确性
- ✅ 防止遗漏配置项

**适用场景**: 正式部署前检查、部署验证

---

## 🔧 部署脚本和配置

### 4. `deploy.sh`
**自动化部署脚本** - 传统方式部署的自动化脚本
- ✅ 自动构建前端和后端
- ✅ 自动启动服务（PM2）
- ✅ 数据库初始化（可选）
- ✅ 交互式配置

**使用方法**:
```bash
chmod +x deploy.sh
bash deploy.sh production
```

---

### 5. `docker-compose.yml`
**Docker Compose 配置** - 一键启动所有服务
- ✅ 包含 MySQL、后端、ML服务、前端
- ✅ 自动配置网络和数据卷
- ✅ 适合开发和生产环境

**使用方法**:
```bash
docker-compose up -d
```

---

## 🐳 Docker 相关文件

### 6. `server/Dockerfile`
**后端服务 Docker 镜像** - 构建后端API服务
- ✅ 多阶段构建优化镜像大小
- ✅ 生产环境优化配置

### 7. `ml-service/Dockerfile`
**ML服务 Docker 镜像** - 构建Python ML服务
- ✅ Python 3.9 基础镜像
- ✅ 使用 Gunicorn 作为WSGI服务器

### 8. `Dockerfile.frontend`
**前端 Docker 镜像** - 构建前端静态文件服务
- ✅ 多阶段构建
- ✅ Nginx 作为Web服务器

### 9. `nginx.conf`
**Nginx 配置文件** - 用于Docker部署的Nginx配置
- ✅ 静态文件服务
- ✅ API反向代理
- ✅ Gzip压缩
- ✅ 安全头配置

---

## ⚙️ 环境变量模板

### 10. `server/.env.example`
**后端环境变量模板** - 后端服务所需的环境变量
- ✅ 数据库配置
- ✅ JWT配置
- ✅ OpenAI配置
- ✅ ML服务地址

**使用方法**: 复制为 `server/.env` 并填入实际值

### 11. `ml-service/.env.example`
**ML服务环境变量模板** - ML服务所需的环境变量
- ✅ 服务端口配置
- ✅ 调试模式配置

**使用方法**: 复制为 `ml-service/.env` 并填入实际值

### 12. `.env.production.example`
**前端生产环境变量模板** - 前端构建时的环境变量
- ✅ API地址配置

**使用方法**: 复制为 `.env.production` 并填入实际值

---

## 📋 使用建议

### 快速开始（推荐新手）
1. 阅读 `docs/快速部署指南.md`
2. 使用 `docker-compose.yml` 一键部署
3. 使用 `docs/部署检查清单.md` 验证

### 生产环境部署
1. 阅读 `docs/项目部署指南.md`
2. 使用 `deploy.sh` 脚本或手动部署
3. 配置 Nginx 和 HTTPS
4. 使用 `docs/部署检查清单.md` 检查

### 开发环境
1. 使用 `docker-compose.yml` 快速搭建
2. 或使用 `docs/快速部署指南.md` 中的方式二

---

## 🔐 安全提示

⚠️ **重要**: 
- 所有 `.env` 文件都已在 `.gitignore` 中，不会被提交
- 生产环境必须修改所有默认密码和密钥
- 不要将 `.env` 文件分享给他人
- 定期更新依赖和系统

---

## 📝 文件关系图

```
部署文档
├── 项目部署指南.md (完整文档)
├── 快速部署指南.md (快速上手)
└── 部署检查清单.md (验证检查)

部署脚本
├── deploy.sh (自动化脚本)
└── docker-compose.yml (Docker部署)

Docker配置
├── server/Dockerfile
├── ml-service/Dockerfile
├── Dockerfile.frontend
└── nginx.conf

环境变量模板
├── server/.env.example
├── ml-service/.env.example
└── .env.production.example
```

---

## ❓ 选择哪个文件？

| 场景 | 推荐文件 |
|------|---------|
| 第一次部署 | `docs/快速部署指南.md` |
| 生产环境部署 | `docs/项目部署指南.md` |
| 使用Docker | `docker-compose.yml` + `docs/快速部署指南.md` |
| 传统部署 | `deploy.sh` + `docs/项目部署指南.md` |
| 验证部署 | `docs/部署检查清单.md` |

---

## 🆘 需要帮助？

1. 查看相应文档的"常见问题"部分
2. 检查服务日志
3. 使用检查清单验证配置

祝部署顺利！🎉







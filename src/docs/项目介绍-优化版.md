# 数据分析平台项目介绍（优化版）

这个项目是一个**数据分析平台**，用来解决"数据统计分散、可视化不统一"等痛点。虽然是项目实践，但我完全按真实业务场景来设计和实现，从前端架构到交互体验都做了比较深的思考。

---

## 第一部分：埋点配置模块

目标是让业务端能灵活配置事件、字段及触发条件，所以我设计了一个可动态扩展的配置系统：

• **基于 JSON Schema 的事件参数配置**：使用 React + Ant Design Form 构建事件定义管理界面，通过 `paramsSchema` 字段定义事件参数结构，支持动态扩展字段类型和校验规则。业务人员可以通过 JSON 格式灵活定义事件参数，系统会自动进行格式校验。

• **表单性能优化**：针对事件定义列表的增删改查操作，我做了组件拆分和状态管理优化，使用 Zustand 进行全局状态管理，减少不必要的 re-render，确保在复杂配置场景下依然保持流畅。

• **统一校验机制**：实现了 JSON Schema 格式校验、事件名称格式校验（字母开头，支持字母数字下划线）、重复性校验等，让各种字段逻辑更加可维护。

---

## 第二部分：可视化分析模块

这个模块展示 PV、UV、事件触发次数、转化率等关键数据，我做了两个关键设计：

**1. 图表组件化体系**
使用 @ant-design/plots（基于 G2Plot）实现统一的图表配置，所有图表都支持通过 config 对象驱动生成，包括折线图、柱状图等，大幅降低重复代码和后续扩展成本。

**2. 性能优化策略**
为提升渲染速度和用户体验，我实现了：
• **图表懒加载**：使用 React.lazy 和 Suspense 实现图表组件的按需加载，减少首屏 bundle 大小
• **数据聚合优化**：后端预先聚合数据，前端只渲染汇总后的结果，避免在前端处理大量原始数据
• **并发请求优化**：使用 Promise.all 并行请求多个数据接口，减少等待时间
• **加载状态管理**：合理使用 Spin 组件和 loading 状态，提升用户体验

在数据量较大的情况下，通过后端聚合和前端懒加载，性能仍然稳定。

---

## 第三部分：数据管理与查询模块

我实现了筛选、分页、权限控制等常用功能，并做了工程化优化：

• **请求层优化**：使用 axios 封装统一的 HTTP 请求工具，加入请求/响应拦截器，实现 Token 自动注入、401 自动跳转登录等通用逻辑，减少重复代码。

• **状态管理优化**：使用 Zustand 替代 Redux，实现更轻量的全局状态管理（用户信息、主题模式、项目选择等），结合 localStorage 实现状态持久化，减少不必要的 re-render。

• **权限控制**：结合用户角色设计，实现了前端路由级权限控制，不同角色看到不同的功能模块。

---

## 第四部分：埋点 SDK 设计（核心亮点）

这是项目的核心模块，我设计并实现了一个高性能、高可靠性的埋点 SDK：

• **批量发送机制**：实现事件队列和批量发送，将 HTTP 请求从每次 1 个优化到每批 50 个，减少 98% 的请求次数，大幅提升性能。

• **离线存储**：网络断开时自动将事件保存到 localStorage，网络恢复后自动发送，确保数据不丢失。

• **自动重试机制**：失败事件自动重试（支持指数退避），重要事件（如错误事件）使用高优先级，提升数据上报成功率到 99.5% 以上。

• **单例模式**：避免重复初始化，节省内存，支持多项目场景。

---

## 项目收获

这个项目让我收获非常大：

**第一，对前端工程化的理解更深了。**
不仅仅写页面，而是会去思考组件抽象、可复用 hooks、图表体系设计、SDK 架构设计，这些让我对可维护性和体系化开发有了更成熟的认识。

**第二，性能优化从"知道"变成了"会做"。**
路由懒加载、组件懒加载、批量发送、数据聚合等优化策略，我都实现了针对性的解决方案，这些都是学校课程里不会讲的实战经验。

**第三，看到了完整的数据链路。**
虽然是实践项目，但我严格模拟真实业务场景，从埋点 SDK → 数据上报 → 事件配置 → 数据处理 → 可视化展示，完整经历一遍后，对数据流向和前后端协作有了非常深的理解。

**第四，SDK 设计能力得到提升。**
通过设计埋点 SDK，我深入理解了单例模式、观察者模式、策略模式等设计模式的实际应用，以及如何平衡性能、可靠性和用户体验。


